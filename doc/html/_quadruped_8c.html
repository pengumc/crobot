<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>crobot: src/Quadruped.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">crobot
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('_quadruped_8c.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Quadruped.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>The default leg configuration has the rotation of servo 0 in the XY plane and in the XZ plane for 1 and 2.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;Quadruped.h&quot;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:af2fa45b8f494515916638aff1689ca24"><td class="memItemLeft" align="right" valign="top"><a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_quadruped_8c.html#af2fa45b8f494515916638aff1689ca24">Quadruped_alloc</a> ()</td></tr>
<tr class="memdesc:af2fa45b8f494515916638aff1689ca24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate quadruped memory.  <a href="#af2fa45b8f494515916638aff1689ca24"></a><br/></td></tr>
<tr class="memitem:a7f940b5c00111d7ea7c89fd46173fbb7"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_quadruped_8c.html#a7f940b5c00111d7ea7c89fd46173fbb7">Quadruped_free</a> (<a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *qped)</td></tr>
<tr class="memdesc:a7f940b5c00111d7ea7c89fd46173fbb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Free qped mem.  <a href="#a7f940b5c00111d7ea7c89fd46173fbb7"></a><br/></td></tr>
<tr class="memitem:ae0b49a2ddd6b9d1e8ca6df0d5ecbc568"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_quadruped_8c.html#ae0b49a2ddd6b9d1e8ca6df0d5ecbc568">Quadruped_startup</a> (<a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *qped)</td></tr>
<tr class="memdesc:ae0b49a2ddd6b9d1e8ca6df0d5ecbc568"><td class="mdescLeft">&#160;</td><td class="mdescRight">Startup function (mainly try to connect usb).  <a href="#ae0b49a2ddd6b9d1e8ca6df0d5ecbc568"></a><br/></td></tr>
<tr class="memitem:a5abe6e54a615a85c2fa59e6e0c38f89e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_quadruped_8c.html#a5abe6e54a615a85c2fa59e6e0c38f89e">Quadruped_configureServoOffset</a> (<a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *qped, uint8_t legNo, uint8_t servoNo, <a class="el" href="_angle_8h.html#a2dad8157cb7c5fb8506edcfe39ac9bb3">angle_t</a> offset)</td></tr>
<tr class="memdesc:a5abe6e54a615a85c2fa59e6e0c38f89e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the offset for one of the servos in a leg.  <a href="#a5abe6e54a615a85c2fa59e6e0c38f89e"></a><br/></td></tr>
<tr class="memitem:a7b1d3d7838b555cc0659c6ddb69dc497"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a7b1d3d7838b555cc0659c6ddb69dc497"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>Quadruped_configureServoDirection</b> (<a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *qped, uint8_t legNo, uint8_t servoNo, int8_t direction)</td></tr>
<tr class="memitem:aa60abeb93047ac6ab787a0c396bbf386"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aa60abeb93047ac6ab787a0c396bbf386"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>Quadruped_configureLegLengths</b> (<a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *qped, uint8_t legNo, double A, double B, double C)</td></tr>
<tr class="memitem:a624dada7257df654aa2a91fdedf0f386"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_quadruped_8c.html#a624dada7257df654aa2a91fdedf0f386">Quadruped_update</a> (<a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *qped)</td></tr>
<tr class="memdesc:a624dada7257df654aa2a91fdedf0f386"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update function, should be called often to update accelerometer and gamepad data.  <a href="#a624dada7257df654aa2a91fdedf0f386"></a><br/></td></tr>
<tr class="memitem:a968b49f6493dba1a92dfd1f5829394c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_quadruped_8c.html#a968b49f6493dba1a92dfd1f5829394c4">Quadruped_setGraphPointers</a> (<a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *qped, double *inX, double *inY, double *inZ, double *outX, double *outY, double *outZ)</td></tr>
<tr class="memdesc:a968b49f6493dba1a92dfd1f5829394c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change location of graph datasets.  <a href="#a968b49f6493dba1a92dfd1f5829394c4"></a><br/></td></tr>
<tr class="memitem:afe15a9c01be8c5f7cfd7844c0b82e3af"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_quadruped_8c.html#afe15a9c01be8c5f7cfd7844c0b82e3af">Quadruped_getPsButton</a> (<a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *qped, <a class="el" href="_pscontroller_8h.html#a602b74e5ed5c1406960e16ffb5d39cee">pscontroller_button</a> button)</td></tr>
<tr class="memdesc:afe15a9c01be8c5f7cfd7844c0b82e3af"><td class="mdescLeft">&#160;</td><td class="mdescRight">Query button state.  <a href="#afe15a9c01be8c5f7cfd7844c0b82e3af"></a><br/></td></tr>
<tr class="memitem:a089eec549fde14a9f1f7dcd30839ef59"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_quadruped_8c.html#a089eec549fde14a9f1f7dcd30839ef59">Quadruped_getPsButtonEdge</a> (<a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *qped, <a class="el" href="_pscontroller_8h.html#a602b74e5ed5c1406960e16ffb5d39cee">pscontroller_button</a> button)</td></tr>
<tr class="memdesc:a089eec549fde14a9f1f7dcd30839ef59"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check for a change in the button state.  <a href="#a089eec549fde14a9f1f7dcd30839ef59"></a><br/></td></tr>
<tr class="memitem:aebf1611121178d42a75ebcad2f014578"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="aebf1611121178d42a75ebcad2f014578"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>Quadruped_getPsAxis</b> (<a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *qped, <a class="el" href="_pscontroller_8h.html#a21858413ba15bd5862f9838737a5c4ee">pscontroller_axis</a> axis)</td></tr>
<tr class="memitem:ae4785fda7b1a8ab51e904609415a1acc"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae4785fda7b1a8ab51e904609415a1acc"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>Quadruped_commit</b> (<a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *qped)</td></tr>
<tr class="memitem:a4391805958d27417ce5778dd17bcf0aa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_quadruped_8c.html#a4391805958d27417ce5778dd17bcf0aa">Quadruped_updateMatricesFromAngles</a> (<a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *qped, rot_vector_t *a)</td></tr>
<tr class="memdesc:a4391805958d27417ce5778dd17bcf0aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Rebuilds the rotation matrix and it's inverse from the provided angles.  <a href="#a4391805958d27417ce5778dd17bcf0aa"></a><br/></td></tr>
<tr class="memitem:aaa20887f015fd19726c38e2d1e6cabb4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_quadruped_8c.html#aaa20887f015fd19726c38e2d1e6cabb4">Quadruped_changeLegEndpoint</a> (<a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *qped, uint8_t legNo, double X, double Y, double Z)</td></tr>
<tr class="memdesc:aaa20887f015fd19726c38e2d1e6cabb4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move a single leg.  <a href="#aaa20887f015fd19726c38e2d1e6cabb4"></a><br/></td></tr>
<tr class="memitem:a5fde02d754c20fae37ead2a7c8109f78"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_quadruped_8c.html#a5fde02d754c20fae37ead2a7c8109f78">Quadruped_changeAllEndpoints</a> (<a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *qped, double X, double Y, double Z)</td></tr>
<tr class="memdesc:a5fde02d754c20fae37ead2a7c8109f78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Move the COB by moving all legs Chnages the endpoints of all legs by the same amount.  <a href="#a5fde02d754c20fae37ead2a7c8109f78"></a><br/></td></tr>
<tr class="memitem:ae55308199dc3d1773c2adcf2666d59c9"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="ae55308199dc3d1773c2adcf2666d59c9"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_quadruped_8c.html#ae55308199dc3d1773c2adcf2666d59c9">Quadruped_getServoData</a> (<a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *qp)</td></tr>
<tr class="memdesc:ae55308199dc3d1773c2adcf2666d59c9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the servo positions currently stored on the device. <br/></td></tr>
<tr class="memitem:ad7f7c827830ef30351ab20767697a6aa"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_quadruped_8c.html#ad7f7c827830ef30351ab20767697a6aa">Quadruped_updateServoinfo</a> (<a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *qp)</td></tr>
<tr class="memdesc:ad7f7c827830ef30351ab20767697a6aa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fill the provided servoinfo with current data.  <a href="#ad7f7c827830ef30351ab20767697a6aa"></a><br/></td></tr>
<tr class="memitem:a6df50ac4d0a52f43e06159f4f0eebab7"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6df50ac4d0a52f43e06159f4f0eebab7"></a>
<a class="el" href="struct_s_e_r_v_o_i_n_f_o.html">servoinfo_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><b>Quadruped_getServoinfoPointer</b> (<a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *qp)</td></tr>
<tr class="memitem:ad6e67a0063d1511a427b47215d98f870"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_quadruped_8c.html#ad6e67a0063d1511a427b47215d98f870">Quadruped_changeSingleServo</a> (<a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *qp, uint8_t l, uint8_t s, double angle)</td></tr>
<tr class="memdesc:ad6e67a0063d1511a427b47215d98f870"><td class="mdescLeft">&#160;</td><td class="mdescRight">Change the angle of a single servo by an amount.  <a href="#ad6e67a0063d1511a427b47215d98f870"></a><br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>The default leg configuration has the rotation of servo 0 in the XY plane and in the XZ plane for 1 and 2. </p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="af2fa45b8f494515916638aff1689ca24"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="struct_q_p_e_d.html">quadruped_t</a>* Quadruped_alloc </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate quadruped memory. </p>
<dl class="section return"><dt>Returns:</dt><dd>A pointer to the new quadruped memory. </dd></dl>

</div>
</div>
<a class="anchor" id="a5fde02d754c20fae37ead2a7c8109f78"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Quadruped_changeAllEndpoints </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *&#160;</td>
          <td class="paramname"><em>qped</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>X</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Z</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move the COB by moving all legs Chnages the endpoints of all legs by the same amount. </p>
<p>Essentially moving the center of the quadruped in the opposite direction. Changes are send to the device if they're acceptable. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">qped</td><td>The quadruped to use. </td></tr>
    <tr><td class="paramname">X</td><td>the change in the x direction. </td></tr>
    <tr><td class="paramname">Y</td><td>the change in the y direction. </td></tr>
    <tr><td class="paramname">Z</td><td>the change in the z direction. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>4 bytes as an int, each representing the error state of 1 leg. </dd></dl>

</div>
</div>
<a class="anchor" id="aaa20887f015fd19726c38e2d1e6cabb4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Quadruped_changeLegEndpoint </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *&#160;</td>
          <td class="paramname"><em>qped</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>legNo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>X</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Y</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>Z</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Move a single leg. </p>
<p>The provided coordinates are for the endpoint (foot) of the leg. So an increase in Z means servo 0 is going down. This is regardless of the orientation of the mainbody (at least the part we know about). Changes are send to the device if they're acceptable. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">qped</td><td>The quadruped data to use. </td></tr>
    <tr><td class="paramname">legNo</td><td>The leg number (0..3). </td></tr>
    <tr><td class="paramname">X</td><td>Change in x direction. </td></tr>
    <tr><td class="paramname">Y</td><td>Change in y direction. </td></tr>
    <tr><td class="paramname">Z</td><td>Change in z direction. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values:</dt><dd>
  <table class="retval">
    <tr><td class="paramname">0</td><td>success, you can send the newly stored servo data to the device </td></tr>
    <tr><td class="paramname">-1..3</td><td>servo number (-returncode +1) could not make the required angle, nothing was done. </td></tr>
    <tr><td class="paramname">-4</td><td>There was no solution for the new location, nothing was done. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad6e67a0063d1511a427b47215d98f870"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Quadruped_changeSingleServo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *&#160;</td>
          <td class="paramname"><em>qp</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>l</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double&#160;</td>
          <td class="paramname"><em>angle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change the angle of a single servo by an amount. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">qped</td><td>The quadruped to use. </td></tr>
    <tr><td class="paramname">l</td><td>The leg number (0..3). </td></tr>
    <tr><td class="paramname">s</td><td>The servo to change (0..2). </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values:</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>success. </td></tr>
    <tr><td class="paramname">0</td><td>Angle was out of bounds for this servo. nothing was changed. </td></tr>
    <tr><td class="paramname"></td><td></td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a5abe6e54a615a85c2fa59e6e0c38f89e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Quadruped_configureServoOffset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *&#160;</td>
          <td class="paramname"><em>qped</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>legNo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>servoNo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_angle_8h.html#a2dad8157cb7c5fb8506edcfe39ac9bb3">angle_t</a>&#160;</td>
          <td class="paramname"><em>offset</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set the offset for one of the servos in a leg. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">qped</td><td>The quadruped data to use. </td></tr>
    <tr><td class="paramname">legNo</td><td>The leg number (0..3). </td></tr>
    <tr><td class="paramname">servoNo</td><td>The servo to change (0..2). </td></tr>
    <tr><td class="paramname">offset</td><td>The offset to set (in radians). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a7f940b5c00111d7ea7c89fd46173fbb7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Quadruped_free </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *&#160;</td>
          <td class="paramname"><em>qped</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Free qped mem. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">qped</td><td>The memory to free. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="afe15a9c01be8c5f7cfd7844c0b82e3af"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Quadruped_getPsButton </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *&#160;</td>
          <td class="paramname"><em>qped</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_pscontroller_8h.html#a602b74e5ed5c1406960e16ffb5d39cee">pscontroller_button</a>&#160;</td>
          <td class="paramname"><em>button</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Query button state. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">qped</td><td>The quadruped data to use. </td></tr>
    <tr><td class="paramname">button</td><td>The playstation controller button to query. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values:</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>Button is pressed. </td></tr>
    <tr><td class="paramname">0</td><td>Button is not pressed. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a089eec549fde14a9f1f7dcd30839ef59"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Quadruped_getPsButtonEdge </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *&#160;</td>
          <td class="paramname"><em>qped</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="_pscontroller_8h.html#a602b74e5ed5c1406960e16ffb5d39cee">pscontroller_button</a>&#160;</td>
          <td class="paramname"><em>button</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Check for a change in the button state. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">qped</td><td>The quadruped data to use. </td></tr>
    <tr><td class="paramname">button</td><td>The playstation controller button to query. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values:</dt><dd>
  <table class="retval">
    <tr><td class="paramname">1</td><td>There was a rising edge. </td></tr>
    <tr><td class="paramname">0</td><td>No change. </td></tr>
    <tr><td class="paramname">-1</td><td>There was a falling edge. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a968b49f6493dba1a92dfd1f5829394c4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Quadruped_setGraphPointers </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *&#160;</td>
          <td class="paramname"><em>qped</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>inX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>inY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>inZ</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>outX</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>outY</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">double *&#160;</td>
          <td class="paramname"><em>outZ</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Change location of graph datasets. </p>
<p>Make the three filters store both their input and output datasets somewhere else (where it's easier for you to read them).<br/>
 All [in/out][x/y/z] parameters should be pointers to an array with at room for at least FILTER_GRAPH_LENGTH doubles. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">qped</td><td>The quadruped data to use. </td></tr>
    <tr><td class="paramname">inX</td><td>input value array for X filter. </td></tr>
    <tr><td class="paramname">inY</td><td>input value array for Y filter. </td></tr>
    <tr><td class="paramname">inZ</td><td>input value array for Z filter. </td></tr>
    <tr><td class="paramname">outX</td><td>output value array for X filter. </td></tr>
    <tr><td class="paramname">outY</td><td>output value array for Y filter. </td></tr>
    <tr><td class="paramname">outZ</td><td>output value array for Z filter. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ae0b49a2ddd6b9d1e8ca6df0d5ecbc568"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Quadruped_startup </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *&#160;</td>
          <td class="paramname"><em>qped</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Startup function (mainly try to connect usb). </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">qped</td><td>The quadruped data to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values:</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&lt;1</td><td>Not connected. </td></tr>
    <tr><td class="paramname">&gt;1</td><td>Connected, numbers of retries left. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a624dada7257df654aa2a91fdedf0f386"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int Quadruped_update </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *&#160;</td>
          <td class="paramname"><em>qped</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update function, should be called often to update accelerometer and gamepad data. </p>
<p>Every 40 ms or so is recommended. Each update sends an usb control message to the robot, so don't go spamming it a million times per second. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">qped</td><td>The quadruped data to use. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns:</dt><dd>the connection status. </dd></dl>

</div>
</div>
<a class="anchor" id="a4391805958d27417ce5778dd17bcf0aa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Quadruped_updateMatricesFromAngles </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *&#160;</td>
          <td class="paramname"><em>qped</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">rot_vector_t *&#160;</td>
          <td class="paramname"><em>a</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Rebuilds the rotation matrix and it's inverse from the provided angles. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">qped</td><td>The quadruped to use. </td></tr>
    <tr><td class="paramname">a</td><td>A 3d vector that holds angles for the rotation around the x y and z axis (in that order). </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ad7f7c827830ef30351ab20767697a6aa"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void Quadruped_updateServoinfo </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="struct_q_p_e_d.html">quadruped_t</a> *&#160;</td>
          <td class="paramname"><em>qp</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fill the provided servoinfo with current data. </p>
<p>Data is angles and pulsewidths for all servos. You need to call this each time you want new data. This is the only function that changes values in the servoinfo structure. </p>
<dl class="params"><dt>Parameters:</dt><dd>
  <table class="params">
    <tr><td class="paramname">qped</td><td>The quadruped to use. </td></tr>
    <tr><td class="paramname">si</td><td>Pointer to servoinfo to fill. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="_quadruped_8c.html">Quadruped.c</a></li>
    <li class="footer">Generated on Sun Jun 3 2012 12:10:56 for crobot by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.1 </li>
  </ul>
</div>
</body>
</html>
